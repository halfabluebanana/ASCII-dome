<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menger Sponge Discombobulated</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.11/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <script>
        /*by halfabluebanana*/
        let boxes = [];
        let NUM_BOXES = 50;

        function setup() {
            createCanvas(windowWidth, windowHeight, WEBGL);
            pixelDensity(Math.min(2, window.devicePixelRatio || 1));
            
            for (let i = 0; i < NUM_BOXES; i++) {
                boxes.push(new Box(random(-200, 200), random(-200, 200), random(-200, 200)));
            }
        }

        function draw() {
            background(0);
            orbitControl(); // optional
            
            for (let b of boxes) {
                b.update();
                b.draw();
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

        class Box {
            constructor(x, y, z) {
                this.x = x;
                this.y = y;
                this.z = z;
                this.rotX = random(TWO_PI);
                this.rotY = random(TWO_PI);
                this.rotZ = random(TWO_PI);
                this.rotSpeedX = random(-0.02, 0.02);
                this.rotSpeedY = random(-0.02, 0.02);
                this.rotSpeedZ = random(-0.02, 0.02);
                this.size = random(20, 60);
            }

            update() {
                this.rotX += this.rotSpeedX;
                this.rotY += this.rotSpeedY;
                this.rotZ += this.rotSpeedZ;
            }

            draw() {
                push();
                translate(this.x, this.y, this.z);
                rotateX(this.rotX);
                rotateY(this.rotY);
                rotateZ(this.rotZ);
                
                // Draw a box with some color variation
                let hue = map(this.size, 20, 60, 0, 255);
                fill(hue, 200, 255, 150);
                stroke(255);
                strokeWeight(1);
                box(this.size);
                pop();
            }
        }
    </script>
</body>
</html>

